# Создание запроса на внесение изменений в системе контроля версий Arc

Краткая инструкция о том, как создать pull request в Arc.

## Введение

Примечание: инструкция составлена на основе тестового задания и доклада Степана Полохина (Yandex Infrastructure) "Arc — внутренняя VCS для монорепозитория Яндекса", как самого достоверного и актуального источника в открытом доступе на момент написания инструкции.

В Яндексе для работы с кодом используют систему контроля версий Arc. Консольные команды в этой системе аналогичны командам Git и используют тот же синтаксис. В этой инструкции рассматривается создание запроса на внесение изменений (pull request).

Перед началом работы установите на компьютер клиент Arc и войдите в систему, используя ваши логин и пароль.

## Внесение изменений в код

Несмотря на схожий синтаксис команд, Arc существенно отличается от Git. С точки зрения пользователя, главное отличие заключается в том, что репозитории в Arc клонировать не надо. Чтобы начать работу с кодом, нужно сначала смонтировать репозиторий, а затем создать ветку.

1. Запустите консольный клиент Arc.
2. Примонтируйте репозиторий вашего проекта:

```bash
    $ arc mount https://arc.yandex.ru/arc/trunk/projectname /home/user/path/to/repository
```

`projectname` - название проекта в репозитории Яндекса; `/home/user/path/to/repository` - точка монтирования репозитория.

3. Создайте рабочую ветку:

```bash
    $ arc branch branchname
```

`branchname` - название ветки. При выборе названий руководствуйтесь правилами наименования, принятыми в Яндексе.

4. Перейдите в рабочую ветку:

```bash
    $ arc checkout branchname
```

5. Внесите изменения в файлы, используя удобный для вас редактор кода.
6. Проиндексируйте измененные и добавленные вами файлы:

```bash
    $ arc add filename1 filename2
```

`filenameX` - имя измененного или нового файла.

7. Зафиксируйте изменения в ветке и кратко опишите изменения:

```bash
    $ arc commit -m "Your message"
```

"Your message" - краткое описание изменений, заключается в кавычки.

8. Перейдите в основную ветку и проверьте ее на предмет изменений:

```bash
    $ arc checkout trunk
    $ arc pull
```

9. Добавьте в рабочую ветку изменения из основной ветки, которые были сделаны коллегами за время вашей работы, устраните все конфликты:

```bash
    $ arc checkout branchname
    $ arc pull origin trunk
```

10. Загрузите изменения в удаленный репозиторий:

```bash
    $ arc push
```

## Создание запроса на внесение изменений

Сделанные вами изменения необходимо влить в основную ветку проекта. Это делается через запрос на внесение изменений (pull request). В системе Arc для этого предусмотрена специальная консольная команда `arc pr create`, описание добавляется через агрумент `-m`:

```bash
    $ arc pr create -m "Brief PR description"
```

"Brief PR description" - краткое описание изменений. В описании укажите, какую проблему решает ваше изменение.
Запрос отправлен на рассмотрение, по результатам которого ваши изменения будут влиты в основную ветку проекта.